<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TRUMPSTEIN REDACTOR | Strategic Sanitization</title>
  
  <!-- Critical Libraries -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap');
    body { font-family: 'Inter', sans-serif; background-color: #050505; color: #e5e5e5; margin: 0; }
    .redaction-grid { background-image: radial-gradient(#111 1px, transparent 1px); background-size: 20px 20px; }
    
    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #050505; }
    ::-webkit-scrollbar-thumb { background: #222; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #333; }

    input[type=range] { -webkit-appearance: none; background: transparent; }
    input[type=range]::-webkit-slider-runnable-track { background: #1f1f1f; height: 4px; border-radius: 2px; }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%; background: #dc2626; cursor: pointer; margin-top: -8px; box-shadow: 0 0 15px rgba(220, 38, 38, 0.6); border: 2px solid #000; transition: all 0.2s; }
    input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.1); background: #ef4444; }
  </style>
</head>
<body class="redaction-grid">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useCallback } = React;

    const SAMPLE_TEXT = `MEMORANDUM FOR THE DIRECTOR\nSUBJECT: PROJECT TRUMPSTEIN - STATUS UPDATE (TOP SECRET)\n\nThis document confirms that the TRUMPSTEIN protocol has reached 98% efficiency.\nOperation "GHOST CURTAIN" is now active in Sector 4.\n\nSENSITIVE ASSETS:\n- Location: 34.0522° N, 118.2437° W (Vault 9)\n- Agent Contact: Victor T. at (555) 019-2024\n- Network ID: 192.168.1.254\n\nFailure to redact these coordinates before public release will result in immediate Level 7 clearance revocation.\n\nREDACTED BY: OFFICE OF THE DIRECTOR`;

    const App = () => {
      const [inputText, setInputText] = useState(SAMPLE_TEXT);
      const [intensity, setIntensity] = useState(40);
      const [previewUrl, setPreviewUrl] = useState(null);
      const [isProcessing, setIsProcessing] = useState(false);

      const generateRedaction = useCallback(() => {
        setIsProcessing(true);
        setTimeout(() => {
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          const width = 800;
          const height = 1100;
          canvas.width = width;
          canvas.height = height;

          // Background
          ctx.fillStyle = '#ffffff';
          ctx.fillRect(0, 0, width, height);

          // Header
          ctx.fillStyle = '#cc0000';
          ctx.font = 'bold 12px sans-serif';
          ctx.fillText('TRUMPSTEIN CLASSIFIED MANIFEST // SECURE PROTOCOL', 70, 45);
          ctx.fillRect(70, 52, 660, 1.5);

          // Redacted Stamp
          ctx.strokeStyle = '#cc0000';
          ctx.lineWidth = 3;
          ctx.strokeRect(580, 70, 150, 45);
          ctx.fillStyle = '#cc0000';
          ctx.font = 'bold 16px sans-serif';
          ctx.fillText('REDACTED', 610, 100);

          // Content
          ctx.font = '16px "Courier New", monospace';
          ctx.textBaseline = 'top';
          const lines = inputText.split('\n');
          let y = 140;
          const margin = 70;
          const maxWidth = width - (margin * 2);
          const lineHeight = 26;

          lines.forEach(line => {
            const words = line.split(/(\s+)/);
            let x = margin;
            words.forEach(word => {
              if (word === '') return;
              const metrics = ctx.measureText(word);
              if (x + metrics.width > maxWidth && word.trim() !== '') {
                x = margin;
                y += lineHeight;
              }
              const shouldRedact = Math.random() * 100 < intensity && word.trim() !== '';
              if (shouldRedact) {
                ctx.fillStyle = '#000000';
                ctx.fillRect(x - 1, y - 2, metrics.width + 2, 20);
              } else {
                ctx.fillStyle = '#1a1a1a';
                ctx.fillText(word, x, y);
              }
              x += metrics.width;
            });
            y += lineHeight;
          });

          // Footer
          ctx.fillStyle = '#aaaaaa';
          ctx.font = '10px monospace';
          ctx.fillText(`ARCHIVE LOG: ${new Date().toLocaleString()} // TRUMPSTEIN GHOST PROTOCOL`, 70, height - 50);

          setPreviewUrl(canvas.toDataURL('image/jpeg', 0.9));
          setIsProcessing(false);
        }, 400);
      }, [inputText, intensity]);

      useEffect(() => { generateRedaction(); }, []);

      return (
        <div className="min-h-screen pb-20">
          <nav className="border-b border-white/5 bg-black/80 backdrop-blur-xl sticky top-0 z-50">
            <div className="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <div className="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center font-black text-white shadow-[0_0_20px_rgba(220,38,38,0.4)] text-xl">T</div>
                <div>
                  <h1 className="font-black text-xl tracking-tighter text-white uppercase italic leading-none">Trumpstein</h1>
                  <p className="text-[10px] text-zinc-600 font-bold uppercase tracking-[0.2em]">Strategic Sanitization</p>
                </div>
              </div>
              <div className="flex items-center gap-4">
                <div className="flex flex-col items-end">
                  <span className="text-[9px] font-black text-zinc-600 uppercase tracking-widest leading-none mb-1">Status</span>
                  <div className="flex items-center gap-2">
                    <span className="text-[10px] font-bold text-green-500 uppercase tracking-widest">Online</span>
                    <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                  </div>
                </div>
              </div>
            </div>
          </nav>

          <main className="max-w-7xl mx-auto px-6 py-12">
            <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
              {/* Left Column: Input and Controls */}
              <div className="lg:col-span-5 space-y-6">
                <div className="bg-zinc-900/40 border border-white/5 rounded-[2.5rem] p-8 space-y-8 shadow-2xl backdrop-blur-sm">
                  <div>
                    <div className="flex justify-between items-center mb-4">
                      <label className="text-[10px] font-black uppercase tracking-[0.3em] text-zinc-500">Source Intelligence</label>
                      <button 
                        onClick={() => setInputText('')}
                        className="text-[9px] font-bold text-zinc-700 hover:text-red-500 uppercase transition-colors"
                      >
                        Reset Terminal
                      </button>
                    </div>
                    <textarea 
                      value={inputText}
                      onChange={(e) => setInputText(e.target.value)}
                      className="w-full h-80 bg-black/60 border border-white/5 rounded-3xl p-6 text-sm focus:ring-1 focus:ring-red-600 focus:outline-none transition-all resize-none font-mono text-zinc-400 placeholder:text-zinc-800"
                      placeholder="Paste sensitive data to be masked..."
                    />
                  </div>

                  <div className="space-y-6">
                    <div className="flex justify-between items-end">
                      <label className="text-[10px] font-black uppercase tracking-[0.3em] text-zinc-500">Masking Intensity</label>
                      <span className="text-2xl font-black text-white">{intensity}%</span>
                    </div>
                    <input 
                      type="range" 
                      min="0" 
                      max="100" 
                      value={intensity} 
                      onChange={(e) => setIntensity(parseInt(e.target.value))} 
                      className="w-full" 
                    />
                  </div>

                  <button 
                    onClick={generateRedaction} 
                    disabled={isProcessing}
                    className="w-full bg-red-600 text-white h-16 rounded-2xl font-black uppercase tracking-[0.4em] text-xs hover:bg-red-500 active:scale-95 transition-all shadow-xl shadow-red-900/20 disabled:opacity-50"
                  >
                    {isProcessing ? "Processing..." : "Apply Redaction"}
                  </button>
                </div>

                {/* About Section */}
                <div className="p-8 border border-white/5 rounded-[2rem] bg-zinc-900/20">
                  <h3 className="text-[10px] font-black uppercase tracking-[0.2em] text-white/50 mb-3">About</h3>
                  <p className="text-sm font-medium text-zinc-300 leading-relaxed italic">
                    The TRUMPSTEIN APP gives you all the power of official redaction with none of the subpoena aftertaste.
                  </p>
                </div>

                <div className="p-8 border border-white/5 rounded-[2rem] bg-black/40">
                  <h3 className="text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500 mb-2">Security Notice</h3>
                  <p className="text-[11px] text-zinc-600 leading-relaxed">
                    This tool runs entirely in your browser. Your data is never uploaded to any server. Once redacted, the underlying text is removed and replaced with a visual mask.
                  </p>
                </div>
              </div>

              {/* Right Column: Visual Result */}
              <div className="lg:col-span-7 space-y-6">
                <div className="flex items-center justify-between px-2">
                  <span className="text-[10px] font-black uppercase tracking-[0.3em] text-zinc-500">Redacted Document</span>
                  {previewUrl && (
                    <button 
                      onClick={() => { 
                        const l = document.createElement('a'); 
                        l.download = `redacted_doc_${Date.now()}.jpg`; 
                        l.href = previewUrl; 
                        l.click(); 
                      }} 
                      className="bg-white text-black px-8 py-2.5 rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-zinc-200 transition-all flex items-center gap-2 shadow-lg"
                    >
                      <svg className="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2.5" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                      Save Document
                    </button>
                  )}
                </div>
                
                <div className="bg-black rounded-[3rem] border border-white/5 p-4 md:p-12 min-h-[800px] flex items-center justify-center relative shadow-inner overflow-hidden">
                  <div className="absolute inset-0 bg-red-900/5 opacity-20 pointer-events-none"></div>
                  {previewUrl ? (
                    <div className="relative z-10 p-2 bg-zinc-800 shadow-2xl rounded-sm">
                      <img 
                        src={previewUrl} 
                        alt="Redacted Result" 
                        className="max-h-[75vh] w-auto shadow-[0_40px_100px_rgba(0,0,0,0.9)] transition-transform duration-500 hover:scale-[1.01]" 
                      />
                    </div>
                  ) : (
                    <div className="text-zinc-900 font-black uppercase tracking-[1em] text-xl animate-pulse">Awaiting Signal</div>
                  )}
                </div>
              </div>
            </div>
          </main>
          
          <footer className="text-center py-10 opacity-30">
            <p className="text-[9px] font-black uppercase tracking-[0.4em] text-zinc-500">TRUMPSTEIN PROTOCOLS // LOCAL ENCRYPTION ACTIVE</p>
          </footer>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
